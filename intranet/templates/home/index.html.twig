{% extends 'base.html.twig' %}

{% block title %}
    {{ parent() }} | Agenda
{% endblock %}

{% block body %}

    <h1>Welcome to the Intranet</h1>

    <form method="get" action="{{ path('homepage') }}">
    <input type="text" name="search" placeholder="Search users..." value="{{ app.request.get('search') }}">
    <button type="submit">Search</button>
    </form>

    {% if searchResults is defined %}
        <h2>Search Results</h2>
        <ul>
            {% for u in searchResults %}
                <li>
                    <a href="/userpage/{{u.id}}">{{ u.firstName }} {{ u.lastName }} ({{ u.email }})</a>
                </li>
            {% else %}
                <li>No users found.</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if user %}

        {{user.firstName}}
        {{id}}

        <button><a href="/userpage/{{id}}">personal</a></button>

        {% if user and user.role == constant('App\\Enum\\UserRole::ADMIN') %}
            <button><a href="admin">admin</a></button>
        {% endif %}

        <br>
        <br>

        <button><a href="{{ path('app_logout') }}">Logout</a></button>

    <br>
    <br>

    {% else %}
        <button><a href="{{ path('app_login') }}">Login</a></button>
    {% endif %}

{% endblock %}
